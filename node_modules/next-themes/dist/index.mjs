"use client";import*as t from"react";var M=(e,r,s,u,m,d,l,h)=>{let a=document.documentElement,v=["light","dark"];function p(c){(Array.isArray(e)?e:[e]).forEach(y=>{let k=y==="class",S=k&&d?m.map(f=>d[f]||f):m;k?(a.classList.remove(...S),a.classList.add(d[c]||c)):a.setAttribute(y,c)}),R(c)}function R(c){h&&v.includes(c)&&(a.style.colorScheme=c)}function i(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(u)p(u);else try{let c=localStorage.getItem(r)||s,y=l&&c==="system"?i():c;p(y)}catch(c){}};var b=["light","dark"],I="(prefers-color-scheme: dark)",O=typeof window=="undefined",x=t.createContext(void 0),U={setTheme:e=>{},themes:[]},z=()=>{var e;return(e=t.useContext(x))!=null?e:U},J=e=>t.useContext(x)?t.createElement(t.Fragment,null,e.children):t.createElement(V,{...e}),N=["light","dark"],V=({forcedTheme:e,disableTransitionOnChange:r=!1,enableSystem:s=!0,enableColorScheme:u=!0,storageKey:m="theme",themes:d=N,defaultTheme:l=s?"system":"light",attribute:h="data-theme",value:a,children:v,nonce:p,scriptProps:R})=>{let[i,c]=t.useState(()=>H(m,l)),[w,y]=t.useState(()=>i==="system"?E():i),k=a?Object.values(a):d,S=t.useCallback(n=>{let o=n;if(!o)return;n==="system"&&s&&(o=E());let T=a?a[o]:o,C=r?W(p):null,P=document.documentElement,L=g=>{g==="class"?(P.classList.remove(...k),T&&P.classList.add(T)):g.startsWith("data-")&&(T?P.setAttribute(g,T):P.removeAttribute(g))};if(Array.isArray(h)?h.forEach(L):L(h),u){let g=b.includes(l)?l:null,D=b.includes(o)?o:g;P.style.colorScheme=D}C==null||C()},[p]),f=t.useCallback(n=>{let o=typeof n=="function"?n(i):n;c(o);try{localStorage.setItem(m,o)}catch(T){}},[i]),A=t.useCallback(n=>{let o=E(n);y(o),i==="system"&&s&&!e&&S("system")},[i,e]);t.useEffect(()=>{let n=window.matchMedia(I);return n.addListener(A),A(n),()=>n.removeListener(A)},[A]),t.useEffect(()=>{let n=o=>{o.key===m&&(o.newValue?c(o.newValue):f(l))};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)},[f]),t.useEffect(()=>{S(e!=null?e:i)},[e,i]);let Q=t.useMemo(()=>({theme:i,setTheme:f,forcedTheme:e,resolvedTheme:i==="system"?w:i,themes:s?[...d,"system"]:d,systemTheme:s?w:void 0}),[i,f,e,w,s,d]);return t.createElement(x.Provider,{value:Q},t.createElement(_,{forcedTheme:e,storageKey:m,attribute:h,enableSystem:s,enableColorScheme:u,defaultTheme:l,value:a,themes:d,nonce:p,scriptProps:R}),v)},_=t.memo(({forcedTheme:e,storageKey:r,attribute:s,enableSystem:u,enableColorScheme:m,defaultTheme:d,value:l,themes:h,nonce:a,scriptProps:v})=>{let p=JSON.stringify([s,r,d,e,h,l,u,m]).slice(1,-1);return t.createElement("script",{...v,suppressHydrationWarning:!0,nonce:typeof window=="undefined"?a:"",dangerouslySetInnerHTML:{__html:`(${M.toString()})(${p})`}})}),H=(e,r)=>{if(O)return;let s;try{s=localStorage.getItem(e)||void 0}catch(u){}return s||r},W=e=>{let r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(r),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(r)},1)}},E=e=>(e||(e=window.matchMedia(I)),e.matches?"dark":"light");export{J as ThemeProvider,z as useTheme};
